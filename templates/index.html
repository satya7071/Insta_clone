<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Home</title>
		<link
			rel="stylesheet"
			href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

		<style>
			body {
				margin: auto;
				font-family: cursive;
				overflow: auto;
			}
			.gradient-text {
				background: linear-gradient(
					to right,
					#833ab4,
					#fd1d1d,
					#f56040,
					#ffa41b,
					#ffd60a,
					#fff50a
				);
				-webkit-background-clip: text;
				-moz-background-clip: text;
				background-clip: text;
				color: transparent;
			}
			
			.row {
				height:100vh;
				position: absolute;
				display: flex;
				flex-direction: column;
				align-items:center;
				width: 300px;
				box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;
			}
			.row2{
				position:absolute;
				left: 350px;
				height:100vh;
				overflow:auto;
				width: calc(100vw - 350px);
			}
			.side-navigation a{
				color: black;
			}

			.brand{
				font-size:50px;
				font-weight:900;
				margin:30px;
				margin-bottom:50px;
				font-family:Optimistic;
			}

			.brand a:hover{
				text-decoration:none;
			}


	  		.entrytext {
				margin: 50px;
				text-align: center;
				font-size: 60px;
				margin-left: -20%;
				text-decoration: underline;
			}
			.card {
				margin-bottom: 70px;
				display: block;
				height: auto;
				width: 450px;
				padding: 15px;
				border: 1px solid #ddd;
				box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2);
				border-radius: 5%;
			}

			.card-header a {
				color: black;
			}

			.card-body p {
				width: 400px;
			}

			.card-body a {
				color: black;
			}

			.card-body img {
				max-height: 500px;
				width: 400px;
			}
			.items li:first-child {
				position: relative;
			}


			.items > li {
				display: inline-block;
				float: none;
			}


			.profileimg img {
				width: 150px;
				height: 150px;
				border-radius: 50%;
				object-fit: fill;
				margin-bottom: 30px;
			}

			.items {
				display:flex;
				flex-direction:column;
				line-height:10px;
				margin-left:-20px;
			}
			.items li{
				display:flex;
				flex-direction:column;
				line-height:30px;
				align-items:center;
				font-size:25px;
			}
			.items li a{
				width:250px;
				padding:10px;
				text-align:left;
			}
			
			.items li a:hover{
				text-decoration:none;
				background-color: #f5f5f5;
				cursor: pointer;
				
			}
			.glyphicon{
				margin-right:15px;
				border: 2px solid black;
				padding:5px;
				border-radius:50%;
			}

			.inp {
				display:flex;
				flex-direction:row;
			}

			.emoji{
				font-weight:900;
				font-size:60px;
				color: orangered;
			}

			#upload_content {
					position: fixed;
					top: 50%;
					left: 50%;
					transform: translate(-50%, -50%);
					width: 200px;
					z-index: 1;
					display: none;
			}

			#upload_content .card-body{
				    padding: 20px;
					line-height: 30px;
					display: flex;
					flex-direction: column;
					flex-wrap: wrap;
					justify-content: flex-start;
					align-items: center;
			}

			.upload_content .card {
				border: none;
				background-color: #add8e6;
			}

			.upload_content .card-header {
				background-color: #f8f9fa;
				border: none;
				padding: 10px;
			}

			.content .card-header {
				width: 200px;
			}

			.upload_content .card-body {
				padding: 10px;
			}

			.upload_content form {
				display: flex;
				flex-direction: column;
				align-items: center;
			}

			.upload_content img {
				max-width: 100%;
			}

			.upload_content .input-class {
				margin-top: 10px;
				padding: 10px;
				border-radius: 5px;
				border: 1px solid #ccc;
				width: 100%;
				box-sizing: border-box;
			}

			.upload_content button {
				margin-top: 10px;
				padding: 10px;
				border-radius: 5px;
				border: none;
				background-color: #007bff;
				color: #fff;
				cursor: pointer;
				width: 100%;
				box-sizing: border-box;
			}

			.upload_content button:hover {
				background-color: #0069d9;
			}

			.upload_content button:active {
				background-color: #0053ba;
			}
			
			.inp button{
				position:relative;
				border:none;
				background:transparent;
				font-size: 18px;
			}

			.buttons{
				    display: flex;
					flex-direction: row;
					margin: 5px;
					width: 100%;
					justify-content: space-around;
			}
			
			
			

			@media (min-width: 768px)
				.items {
					float: left;
					
				}
				
			
			

			@media (max-width: 580px) {
				
			}


    {% comment %} @media (max-width: 767px) {
      

      
    } {% endcomment %}
		</style>
	</head>
	<body>

		<div class="container-fluid">
			
					<div class="row">
						<div class="side-navigation">
							
							<ul class="items">
								<div class="brand"><a href="\">Coup..<span class="emoji">&#x263A;</span></a></div>
								<li class='profileimg'><img src="{{user_profile.profileimg.url}}" /></li>
							<li class="nav-item">
								<form method="POST" class="navbar-form" action="/search">
								{% csrf_token %}
								<div class="form-group">
									<div class="inp">
									<div>
									<input type="text" class="form-control" placeholder="Search" name="username" />
									</div>
									<div>
									<button type="submit" claass="btn btn-default">
									<span class="glyphicon glyphicon-search"></span>
									</button>
									<div>
									</div>
								</div>
								</form>
							</li>
							<li class="nav-item upload-li">
								<a onclick="toggleUploadForm()" class="up"><span class="glyphicon glyphicon-plus"></span>Upload</a>
									
							</li>
							<li class="nav-item"><a href="/profile/{{request.user}}"><span class="glyphicon glyphicon-user"></span>Profile</a></li>
							<li class="nav-item"><a href="settings"><span class="glyphicon glyphicon-cog"></span>Settings</a></li>
							<li class="nav-item"><a href="logout"><span class="glyphicon glyphicon-log-out"></span>Logout</a></li>
							</ul>
						</div>
					
					<div class="row2">
						<div class="upload_content" id="upload_content" style="display: none;">
										<div class="container-fluid">
									<div class="card">
									<div class="card-body">
										<form method="POST" action="upload" enctype="multipart/form-data">
										{% csrf_token %}
										<center>
											<img id="uploaded_image" class="uploaded_img" src="" />
										</center>
										<input type="file" name="image_upload" placeholder="No chosen file" class="input-class" onchange="previewImage(event)" required/>
										<input type="textcontent" name="caption" placeholder="Enter the caption" class="input-class" />
										<div class="buttons">
											<div><button type="submit" title="Upload">Upload</button></div>
											<div><button type="button" style="background-color: red;" title="Cancel" onclick="toggleUploadForm()">Cancel</button></div>
										</div>
										</form>
									</div>
									</div>
								</div>
								</div>
						<div class="main-content">
							<div class="content">
								
								<div class="entrytext gradient-text">Namaste, {{user}}...!</div>

								{% for post in posts reversed%}
								<div class="df">
									<div class="card df">
										<div class="card-header">
											<a href="profile/{{post.user}}">@{{post.user}}</a>
										</div>
										<hr />
										<div class="card-body">
											<a href="{{post.image.url}}">
												<img src="{{post.image.url}}" alt="" />
												<hr
											/></a>
											<p>
												<a href="profile/{{post.user}}"><strong>{{post.user}}: </strong></a
												>{{post.caption}}
											</p>
											{% if post.no_of_likes == 0 %}
											<p>No Likes</p>
											{% elif post.no_of_likes == 1 %}
											<p>Liked by 1 person</p>
											{% else %}
											<p>Liked by {{post.no_of_likes}} persons</p>
											{% endif %}
											<a href="/like-post?post_id={{post.id}}">
												<span class="glyphicon glyphicon-thumbs-up" id="likeicon"></span
											></a>

											<a href="{{post.image.url}}" download>
												<right
													><span class="glyphicon glyphicon-save" id="downloadicon"></span
												></right>
											</a>
										</div>
									</div>
								</div>
								{% endfor %}
							</div> 
						</div>
					</div>
			</div>
		</div>

		<script>
			function toggleUploadForm() {
				var uploadForm = document.getElementById("upload_content");
				if (uploadForm.style.display === "none" || uploadForm.style.display === "") {
					document.querySelector(".main-content").style.display = "none";
					uploadForm.style.display = "block";
					
					uploadForm.style.float = "right";
				} else {
					document.querySelector(".main-content").style.display = "block";
					uploadForm.style.display = "none";
				}
	}

function previewImage(event) {
    var reader = new FileReader();
    reader.onload = function() {
        var imgElement = document.getElementById("uploaded_image");
        imgElement.src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
}

</script>
		
	</body>
</html>
